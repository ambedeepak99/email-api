function containerCtrl(a){}function EmailCtrl(a,b,c,d,e){function f(){$(".sendEmail").slideUp(500),$(".emailloading").delay(1e3).slideDown(500),$(".logoutBtn").hide(),void 0!=i.user.emails?i.user.emails&&i.user.subject&&i.user.body?j.sendMails(i.user,function(a){a&&2e3===a.response.code?($(".sendEmail").slideUp(500),$(".emailloading").delay(500).slideDown(500).slideUp(500).hide(0),$(".emailSuccess").delay(2e3).slideDown(500),$(".logoutBtn").delay(2e3).show()):($(".emailloading").delay(1e3).slideDown(500).slideUp(500).hide(0),$(".emailfailure").delay(2e3).slideDown(500),$(".logoutBtn").delay(2e3).show())}):(j.createAlert(1,"Please fill all mandatory details",3),$(".emailloading").slideUp(100),$(".sendEmail").delay(1e3).slideDown(500)):(j.createAlert(1,"Please provider proper email address",3),$(".emailloading").slideUp(100),$(".sendEmail").delay(1e3).slideDown(500))}function g(){k.deleteStorage("access_token"),b.path("/login"),location.reload()}function h(){i.user={emails:"",body:"",subject:""},$(".sendEmail").delay(1e3).slideDown(500),$(".emailSuccess").slideUp(500).hide(0),$(".emailfailure").slideUp(500).hide(0)}var i=this,j=d.WEBSERVICES,k=(c.SOUNDNOTIFY,c.STORAGE);k.getStorage("access_token")&&""!=k.getStorage("access_token")?(i.user={emails:"",body:"",subject:""},i.sendmail=f,i.logout=g,i.sendMailAgn=h):(k.deleteStorage("access_token"),b.path("/login"),location.reload())}function LoginCtrl(a,b,c,d,e){function f(){1==j.issignup?(j.signupbtn=!1,j.user.uName&&j.user.pwd&&j.user.email?k.signUp(j.user,function(a){a&&2e3===a.response.code?(j.issignup=!1,j.signupbtn=!0,j.loginbtn=!1,k.createAlert(2,"User Register Successfully",3),i(),b.path("/login")):k.createAlert(1,"User Already Exits",3)}):k.createAlert(1,"Please fill all mandatory details",3)):j.user.uName&&j.user.pwd?k.validatelogin(j.user,function(a){a&&2e3===a.response.code?(l.setStorage("access_token",a.response.data.token),b.path("/email")):(k.createAlert(1,"Invalid username and password",3),l.deleteStorage("access_token"))}):k.createAlert(1,"Please fill all mandatory details",3)}function g(){j.issignup=!0,j.signupbtn=!1,j.loginbtn=!0}function h(){j.issignup=!1,j.signupbtn=!0,j.loginbtn=!1}function i(){j.user={uName:"",pwd:"",email:""}}var j=this;j.issignup=!1,j.signupbtn=!0,j.loginbtn=!1;var k=d.WEBSERVICES,l=(c.SOUNDNOTIFY,c.STORAGE);j.user={uName:"",pwd:"",email:""},j.submit=f,j.signup=g,j.logAgn=h,l.getStorage("access_token")&&b.path("/email")}var app=angular.module("done",["ngRoute"]);app.config(["$httpProvider","$routeProvider",function(a,b){b.when("/",{redirectTo:"/login"}).when("/login",{templateUrl:"templates/login/login.html",controller:"LoginCtrl",controllerAs:"log"}).when("/email",{templateUrl:"templates/email/email.html",controller:"EmailCtrl",controllerAs:"email"}).otherwise({redirectTo:"/login"})}]),app.controller("containerCtrl",["Utils",containerCtrl]),app.directive("hcPieChart",function(){return{restrict:"E",template:"<div></div>",scope:{title:"@",data:"="},link:function(a,b){Highcharts.chart(b[0],{chart:{plotBackgroundColor:null,plotBorderWidth:null,plotShadow:!1,type:"pie"},title:{text:""},tooltip:{pointFormat:"{series.name}:{point.y} <b>({point.percentage:.1f}%)</b>"},plotOptions:{pie:{cursor:"pointer",dataLabels:{enabled:!0,format:"<b>{point.name}</b>: {point.y}",style:{color:Highcharts.theme&&Highcharts.theme.contrastTextColor||"black"}}}},series:[{name:a.title,colorByPoint:!0,data:a.data}]})}}}),app.directive("clientAutoComplete",function(){return{restrict:"A",link:function(a,b,c){c.autocomplete({source:function(b,c){var d=b.term,e=a.dataSource;if(e){var f=$filter("filter")(e,{name:d});angular.forEach(f,function(a){a.value=a.name})}c(f)},minLength:1,select:function(b,c){a.$apply(function(){a.setClientData(c.item)})}})}}}),app.directive("hcColumnChart",function(){return{restrict:"E",template:"<div></div>",scope:{title:"@",axistitle:"=",data:"="},link:function(a,b){Highcharts.chart(b[0],{chart:{type:"column"},title:{text:a.title},subtitle:{text:""},legend:{align:"right",verticalAlign:"middle",layout:"vertical"},xAxis:{categories:a.axistitle.xTitle,labels:{x:-10}},yAxis:{allowDecimals:!1,title:{text:a.axistitle.yTitle}},series:a.data,responsive:{rules:[{condition:{maxWidth:500},chartOptions:{legend:{align:"center",verticalAlign:"bottom",layout:"horizontal"},yAxis:{labels:{align:"left",x:0,y:-5},title:{text:null}},subtitle:{text:null},credits:{enabled:!1}}}]}})}}}),app.factory("Utils",function(){function a(a){return Base64.encode(a)}function b(a){return Base64.decode(a)}function c(){try{startTruckTone.pause(),startTruckTone.currentTime=0,startTruckTone.play()}catch(a){throw error(a)}}function d(a,b){localStorage.setItem(a,b)}function e(a){var b=localStorage.getItem(a);return b||b}function f(a){localStorage.removeItem(a)}return{CONSTANTS:{BASE_URL:"http://10.40.12.205:3000/",SERVER_ERROR:"There is no internet connection or server unreachable.",SETTING:{SOUND_NOTIFY_SETTING_KEY:"SOUNDNOTIFY"}},STORAGE:{setStorage:d,getStorage:e,deleteStorage:f},SOUNDNOTIFY:{playTruckTone:c},ENCODE_DECODE:{encodeString:a,decodeString:b}}}),app.factory("WebService",["$http","Utils","$location",function(a,b,c){function d(a,d){401==a.code||402==a.code?(c.path("/login"),g(1,"your session has been expire please try to login again",3)):(c.path("/login"),g(1,b.CONSTANTS.SERVER_ERROR,3),d(l))}function e(c,e){var f={username:c.uName,password:c.pwd},g={headers:{"Content-Type":"application/json",authorization:b.STORAGE.getStorage("access_token")}};a.post(i+"user/signin",f,g).success(function(a){l.success=!0,l.response=a,e(l)}).error(function(a){d(a)})}function f(c,e){var f={username:c.uName,password:c.pwd,email:c.email},g={headers:{"Content-Type":"application/json",authorization:b.STORAGE.getStorage("access_token")}};a.post(i+"user/signup",f,g).success(function(a){l.success=!0,l.response=a,e(l)}).error(function(a){d(a)})}function g(a,b,c){$("div.alert-box.active").remove(),c*=1e3;var d;switch(a){case 1:d=$("div.alert-box.alert-msg").clone();break;case 2:d=$("div.alert-box.success-msg").clone();break;case 3:d=$("div.alert-box.warning-msg").clone();break;default:d=$("div.alert-box.alert-msg").clone()}$(d).addClass("active"),$(d).find(".alert-message").text(b),$("#alert-container").append(d),$(d).slideDown(j),c&&setTimeout(function(){$(d).slideUp(j,function(){$(d).remove()})},c)}function h(c,e){var f={to:c.emails.split(","),subject:c.subject,body:c.body},g={headers:{"Content-Type":"application/json",authorization:b.STORAGE.getStorage("access_token")}};a.post(i+"v1/mailer/sendmail",f,g).success(function(a){l.success=!0,l.response=a,e(l)}).error(function(a){d(a)})}var i=b.CONSTANTS.BASE_URL,j=750,k={validatelogin:e,createAlert:g,sendMails:h,signUp:f},l={success:!1,response:null};return{WEBSERVICES:k}}]),app.filter("filterMultipleForOrder",["$filter",function(a){return function(a,b){function c(a,b){var c=[],d={searchText:!0,orderStatus:!0,multipleOrderStatus:!0,outlet:!0,subarea:!0,clientPlatform:!0,deliveryProvider:!0,dineinStatus:!0};return b&&b.length&&angular.forEach(b,function(b,e){a.orderStatus&&b.order_status&&b.order_status.status&&(d.orderStatus=b.order_status.status.toLowerCase()===a.orderStatus.toLowerCase()),a.multipleOrderStatus&&b.order_status&&b.order_status.status&&(d.multipleOrderStatus=a.multipleOrderStatus.toLowerCase().indexOf(b.order_status.status.toLowerCase())>-1),a.clientPlatform&&b.client_platform&&(d.clientPlatform=b.client_platform.toLowerCase().indexOf(a.clientPlatform.old_name.toLowerCase())>-1),a.outlet&&b.outlet&&b.outlet.name&&(d.outlet=b.outlet.name.toLowerCase().indexOf(a.outlet.name.toLowerCase())>-1),a.subarea&&b.user&&b.user.address&&(b.user.address.subarea_name?d.subarea=b.user.address.subarea_name.toLowerCase().indexOf(a.subarea.toLowerCase())>-1:b.user.address.area_name&&(d.subarea=b.user.address.area_name.toLowerCase().indexOf(a.subarea.toLowerCase())>-1)),a.deliveryProvider&&b.delivery_provider&&(d.deliveryProvider=b.delivery_provider.toLowerCase().indexOf(a.deliveryProvider.toLowerCase())>-1),a.dineinStatus&&b.reservation_status&&(d.dineinStatus=b.reservation_status.toLowerCase()===a.dineinStatus.toLowerCase()),a.searchText&&(d.searchText=JSON.stringify(b).toLowerCase().indexOf(a.searchText.toLowerCase())>-1),d.orderStatus&&d.outlet&&d.subarea&&d.clientPlatform&&d.searchText&&d.multipleOrderStatus&&d.deliveryProvider&&d.dineinStatus&&c.push(b)}),c}var d={data:a,filteredData:[],applyCustomFilter:c};return b&&(d.filteredData=d.applyCustomFilter(b,d.data)),d.filteredData}}]),app.filter("unique",function(){return function(a,b){if(!1===b)return a;if((b||angular.isUndefined(b))&&angular.isArray(a)){var c=[],d=function(a){return angular.isObject(a)&&angular.isString(b)?a[b]:a};angular.forEach(a,function(a){for(var b=!1,e=0;e<c.length;e++)if(angular.equals(d(c[e]),d(a))){b=!0;break}b||c.push(a)}),a=c}return a}}),app.filter("zpad",function(){return function(a,b){return void 0===a&&(a=""),a.length>=b?a:("0".repeat(b)+a).slice(-1*b)}}),app.filter("getTotal",function(){return function(a,b,c){var d=0;if(void 0!==a&&a.length>=1)for(var e=0;e<a.length;e++)d+=void 0!==c?a[e][b]*a[e][c]:a[e][b];return d}}),app.filter("timeSpanStringToDate",function(){return function(a,b){if(a){var c=new Date;b&&(c=Date.parse(b));return new Date(c.toLocaleDateString()+" "+a)}return a}}),app.controller("EmailCtrl",["$scope","$location","Utils","WebService","$interval",EmailCtrl]),app.controller("LoginCtrl",["$scope","$location","Utils","WebService","$interval",LoginCtrl]);